---
import { actions, isInputError } from "astro:actions";

interface Props {
	postSlug: string;
}

const { postSlug } = Astro.props;

const result = Astro.getActionResult(actions.addComment);
const inputErrors = isInputError(result?.error) ? result.error.fields : {};
---

<form method="POST" action={actions.addComment} class="mb-8">
	<input type="hidden" name="postSlug" value={postSlug} />

	<div class="mb-4">
		<label for="name">Nombre:</label>
		<input
			type="text"
			id="name"
			name="name"
			required
			class="w-full p-2 border rounded"
		/>
		{inputErrors.name && <p class="text-red-500">{inputErrors.name}</p>}
	</div>

	<div class="mb-4">
		<label for="email">Email:</label>
		<input
			type="email"
			id="email"
			name="email"
			required
			class="w-full p-2 border rounded"
		/>
		{inputErrors.email && <p class="text-red-500">{inputErrors.email}</p>}
	</div>

	<div class="mb-4">
		<label for="message">Comentario:</label>
		<textarea
			id="message"
			name="message"
			required
			class="w-full p-2 border rounded"></textarea>
		{
			inputErrors.message && (
				<p class="text-red-500">{inputErrors.message}</p>
			)
		}
	</div>

	<button
		type="submit"
		class="bg-black text-white py-2 px-4 rounded hover:bg-gray-800 dark:bg-white dark:text-black dark:hover:bg-gray-200 transition"
	>
		Agregar Comentario
	</button>
</form>
