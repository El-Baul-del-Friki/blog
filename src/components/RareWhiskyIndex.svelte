<script>
	import Chart from "chart.js/auto";
	let chartObject = null;
	let dataToGraph = $state([12, 19, 3, 5, 2, 3, 10, 20, 3, 9, 200, 9, 1, 2]);

	function chart(node, data) {
		function setupChart(_data) {
			chartObject = new Chart(node, {
				type: "line",
				data: {
					labels: [
						"2015-01-05",
						"2015-01-12",
						"2015-01-19",
						"2015-01-26",
						"2015-02-02",
						"2015-02-09",
						"2015-02-16",
						"2015-02-23",
						"2015-03-02",
						"2015-03-09",
						"2015-03-16",
						"2015-03-23",
						"2015-03-30",
						"2015-04-06",
						"2015-04-13",
						"2015-04-20",
						"2015-04-27",
						"2015-05-04",
						"2015-05-11",
						"2015-05-18",
						"2015-05-25",
						"2015-06-01",
						"2015-06-08",
						"2015-06-15",
						"2015-06-22",
						"2015-06-29",
						"2015-07-06",
						"2015-07-13",
						"2015-07-20",
						"2015-07-27",
						"2015-08-03",
						"2015-08-10",
						"2015-08-17",
						"2015-08-24",
						"2015-08-31",
						"2015-09-07",
						"2015-09-14",
						"2015-09-21",
						"2015-09-28",
						"2015-10-05",
						"2015-10-12",
						"2015-10-19",
						"2015-10-26",
						"2015-11-02",
						"2015-11-09",
						"2015-11-16",
						"2015-11-23",
						"2015-11-30",
						"2015-12-07",
						"2015-12-14",
						"2015-12-21",
						"2015-12-28",
						"2016-01-04",
						"2016-01-11",
						"2016-01-18",
						"2016-01-25",
						"2016-02-01",
						"2016-02-08",
						"2016-02-15",
						"2016-02-22",
						"2016-02-29",
						"2016-03-07",
						"2016-03-14",
						"2016-03-21",
						"2016-03-28",
						"2016-04-04",
						"2016-04-11",
						"2016-04-18",
						"2016-04-25",
						"2016-05-02",
						"2016-05-09",
						"2016-05-16",
						"2016-05-23",
						"2016-05-30",
						"2016-06-06",
						"2016-06-13",
						"2016-06-20",
						"2016-06-27",
						"2016-07-04",
						"2016-07-11",
						"2016-07-18",
						"2016-07-25",
						"2016-08-01",
						"2016-08-08",
						"2016-08-15",
						"2016-08-22",
						"2016-08-29",
						"2016-09-05",
						"2016-09-12",
						"2016-09-19",
						"2016-09-26",
						"2016-10-03",
						"2016-10-10",
						"2016-10-17",
						"2016-10-24",
						"2016-10-31",
						"2016-11-07",
						"2016-11-14",
						"2016-11-21",
						"2016-11-28",
						"2016-12-05",
						"2016-12-12",
						"2016-12-19",
						"2016-12-26",
						"2017-01-02",
						"2017-01-09",
						"2017-01-16",
						"2017-01-23",
						"2017-01-30",
						"2017-02-06",
						"2017-02-13",
						"2017-02-20",
						"2017-02-27",
						"2017-03-06",
						"2017-03-13",
						"2017-03-20",
						"2017-03-27",
						"2017-04-03",
						"2017-04-10",
						"2017-04-17",
						"2017-04-24",
						"2017-05-01",
						"2017-05-08",
						"2017-05-15",
						"2017-05-22",
						"2017-05-29",
						"2017-06-05",
						"2017-06-12",
						"2017-06-19",
						"2017-06-26",
						"2017-07-03",
						"2017-07-10",
						"2017-07-17",
						"2017-07-24",
						"2017-07-31",
						"2017-08-07",
						"2017-08-14",
						"2017-08-21",
						"2017-08-28",
						"2017-09-04",
						"2017-09-11",
						"2017-09-18",
						"2017-09-25",
						"2017-10-02",
						"2017-10-09",
						"2017-10-16",
						"2017-10-23",
						"2017-10-30",
						"2017-11-06",
						"2017-11-13",
						"2017-11-20",
						"2017-11-27",
						"2017-12-04",
						"2017-12-11",
						"2017-12-18",
						"2017-12-25",
						"2018-01-01",
						"2018-01-08",
						"2018-01-15",
						"2018-01-22",
						"2018-01-29",
						"2018-02-05",
						"2018-02-12",
						"2018-02-19",
						"2018-02-26",
						"2018-03-05",
						"2018-03-12",
						"2018-03-19",
						"2018-03-26",
						"2018-04-02",
						"2018-04-09",
						"2018-04-16",
						"2018-04-23",
						"2018-04-30",
						"2018-05-07",
						"2018-05-14",
						"2018-05-21",
						"2018-05-28",
						"2018-06-04",
						"2018-06-11",
						"2018-06-18",
						"2018-06-25",
						"2018-07-02",
						"2018-07-09",
						"2018-07-16",
						"2018-07-23",
						"2018-07-30",
						"2018-08-06",
						"2018-08-13",
						"2018-08-20",
						"2018-08-27",
						"2018-09-03",
						"2018-09-10",
						"2018-09-17",
						"2018-09-24",
						"2018-10-01",
						"2018-10-08",
						"2018-10-15",
						"2018-10-22",
						"2018-10-29",
						"2018-11-05",
						"2018-11-12",
						"2018-11-19",
						"2018-11-26",
						"2018-12-03",
						"2018-12-10",
						"2018-12-17",
						"2018-12-24",
						"2018-12-31",
						"2019-01-07",
						"2019-01-14",
						"2019-01-21",
						"2019-01-28",
						"2019-02-04",
						"2019-02-11",
						"2019-02-18",
						"2019-02-25",
						"2019-03-04",
						"2019-03-11",
						"2019-03-18",
						"2019-03-25",
						"2019-04-01",
						"2019-04-08",
						"2019-04-15",
						"2019-04-22",
						"2019-04-29",
						"2019-05-06",
						"2019-05-13",
						"2019-05-20",
						"2019-05-27",
						"2019-06-03",
						"2019-06-10",
						"2019-06-17",
						"2019-06-24",
						"2019-07-01",
						"2019-07-08",
						"2019-07-15",
						"2019-07-22",
						"2019-07-29",
						"2019-08-05",
						"2019-08-12",
						"2019-08-19",
						"2019-08-26",
						"2019-09-02",
						"2019-09-09",
						"2019-09-16",
						"2019-09-23",
						"2019-09-30",
						"2019-10-07",
						"2019-10-14",
						"2019-10-21",
						"2019-10-28",
						"2019-11-04",
						"2019-11-11",
						"2019-11-18",
						"2019-11-25",
						"2019-12-02",
						"2019-12-09",
						"2019-12-16",
						"2019-12-23",
						"2019-12-30",
						"2020-01-06",
						"2020-01-13",
						"2020-01-20",
						"2020-01-27",
						"2020-02-03",
						"2020-02-10",
						"2020-02-17",
						"2020-02-24",
						"2020-03-02",
						"2020-03-09",
						"2020-03-16",
						"2020-03-23",
						"2020-03-30",
						"2020-04-06",
						"2020-04-13",
						"2020-04-20",
						"2020-04-27",
						"2020-05-04",
						"2020-05-11",
						"2020-05-18",
						"2020-05-25",
						"2020-06-01",
						"2020-06-08",
						"2020-06-15",
						"2020-06-22",
						"2020-06-29",
						"2020-07-06",
						"2020-07-13",
						"2020-07-20",
						"2020-07-27",
						"2020-08-03",
						"2020-08-10",
						"2020-08-17",
						"2020-08-24",
						"2020-08-31",
						"2020-09-07",
						"2020-09-14",
						"2020-09-21",
						"2020-09-28",
						"2020-10-05",
						"2020-10-12",
						"2020-10-19",
						"2020-10-26",
						"2020-11-02",
						"2020-11-09",
						"2020-11-16",
						"2020-11-23",
						"2020-11-30",
						"2020-12-07",
						"2020-12-14",
						"2020-12-21",
						"2020-12-28",
						"2021-01-04",
						"2021-01-11",
						"2021-01-18",
						"2021-01-25",
						"2021-02-01",
						"2021-02-08",
						"2021-02-15",
						"2021-02-22",
						"2021-03-01",
						"2021-03-08",
						"2021-03-15",
						"2021-03-22",
						"2021-03-29",
						"2021-04-05",
						"2021-04-12",
						"2021-04-19",
						"2021-04-26",
						"2021-05-03",
						"2021-05-10",
						"2021-05-17",
						"2021-05-24",
						"2021-05-31",
						"2021-06-07",
						"2021-06-14",
						"2021-06-21",
						"2021-06-28",
						"2021-07-05",
						"2021-07-12",
						"2021-07-19",
						"2021-07-26",
						"2021-08-02",
						"2021-08-09",
						"2021-08-16",
						"2021-08-23",
						"2021-08-30",
						"2021-09-06",
						"2021-09-13",
						"2021-09-20",
						"2021-09-27",
						"2021-10-04",
						"2021-10-11",
						"2021-10-18",
						"2021-10-25",
						"2021-11-01",
						"2021-11-08",
						"2021-11-15",
						"2021-11-22",
						"2021-11-29",
						"2021-12-06",
						"2021-12-13",
						"2021-12-20",
						"2021-12-27",
						"2022-01-03",
						"2022-01-10",
						"2022-01-17",
						"2022-01-24",
						"2022-01-31",
						"2022-02-07",
						"2022-02-14",
						"2022-02-21",
						"2022-02-28",
						"2022-03-07",
						"2022-03-14",
						"2022-03-21",
						"2022-03-28",
						"2022-04-04",
						"2022-04-11",
						"2022-04-18",
						"2022-04-25",
						"2022-05-02",
						"2022-05-09",
						"2022-05-16",
						"2022-05-23",
						"2022-05-30",
						"2022-06-06",
						"2022-06-13",
						"2022-06-20",
						"2022-06-27",
						"2022-07-04",
						"2022-07-11",
						"2022-07-18",
						"2022-07-25",
						"2022-08-01",
						"2022-08-08",
						"2022-08-15",
						"2022-08-22",
						"2022-08-29",
						"2022-09-05",
						"2022-09-12",
						"2022-09-19",
						"2022-09-26",
						"2022-10-03",
						"2022-10-10",
						"2022-10-17",
						"2022-10-24",
						"2022-10-31",
						"2022-11-07",
						"2022-11-14",
						"2022-11-21",
						"2022-11-28",
						"2022-12-05",
						"2022-12-12",
						"2022-12-19",
						"2022-12-26",
						"2023-01-02",
						"2023-01-09",
						"2023-01-16",
						"2023-01-23",
						"2023-01-30",
						"2023-02-06",
						"2023-02-13",
						"2023-02-20",
						"2023-02-27",
						"2023-03-06",
						"2023-03-13",
						"2023-03-20",
						"2023-03-27",
						"2023-04-03",
						"2023-04-10",
						"2023-04-17",
						"2023-04-24",
						"2023-05-01",
						"2023-05-08",
						"2023-05-15",
						"2023-05-22",
						"2023-05-29",
						"2023-06-05",
						"2023-06-12",
						"2023-06-19",
						"2023-06-26",
						"2023-07-03",
						"2023-07-10",
						"2023-07-17",
						"2023-07-24",
						"2023-07-31",
						"2023-08-07",
						"2023-08-14",
						"2023-08-21",
						"2023-08-28",
						"2023-09-04",
						"2023-09-11",
						"2023-09-18",
						"2023-09-25",
						"2023-10-02",
						"2023-10-09",
						"2023-10-16",
						"2023-10-23",
						"2023-10-30",
						"2023-11-06",
						"2023-11-13",
						"2023-11-20",
						"2023-11-27",
						"2023-12-04",
						"2023-12-11",
						"2023-12-18",
						"2023-12-25",
						"2024-01-01",
						"2024-01-08",
						"2024-01-15",
						"2024-01-22",
						"2024-01-29",
						"2024-02-05",
						"2024-02-12",
						"2024-02-19",
						"2024-02-26",
						"2024-03-04",
						"2024-03-11",
						"2024-03-18",
						"2024-03-25",
						"2024-04-01",
						"2024-04-08",
						"2024-04-15",
						"2024-04-22",
						"2024-04-29",
						"2024-05-06",
						"2024-05-13",
						"2024-05-20",
						"2024-05-27",
						"2024-06-03",
						"2024-06-10",
						"2024-06-17",
						"2024-06-24",
						"2024-07-01",
						"2024-07-08",
						"2024-07-15",
						"2024-07-22",
						"2024-07-29",
						"2024-08-05",
						"2024-08-12",
						"2024-08-19",
						"2024-08-26",
						"2024-09-02",
						"2024-09-09",
						"2024-09-16",
						"2024-09-23",
						"2024-09-30",
						"2024-10-07",
						"2024-10-14",
						"2024-10-21",
						"2024-10-28",
						"2024-11-04",
						"2024-11-11",
						"2024-11-18",
						"2024-11-25",
						"2024-12-02",
						"2024-12-09",
						"2024-12-16",
						"2024-12-23",
						"2024-12-30",
						"2025-01-06",
						"2025-01-13",
						"2025-01-20",
						"2025-01-27",
						"2025-02-03",
						"2025-02-10",
						"2025-02-17",
						"2025-02-24",
						"2025-03-03",
						"2025-03-10",
						"2025-03-17",
						"2025-03-24",
						"2025-03-31",
						"2025-04-07",
						"2025-04-14",
					],
					datasets: [
						{
							label: "Rare Whisky Index",
							backgroundColor: "rgb(255, 99, 132)",
							borderColor: "rgb(255, 99, 132)",
							data: [
								285.46, 283.09, 279.97, 279.97, 293.16, 298.75,
								298.73, 296.18, 302.74, 303.64, 300.54, 300.56,
								297.55, 303.3, 302.59, 302.59, 299.1, 301.16,
								298.23, 298.23, 298.23, 301.42, 309.99, 305.28,
								305.21, 305.21, 301.48, 300.91, 300.91, 300.91,
								306.18, 306.74, 306.38, 306.38, 306.38, 322.42,
								320.84, 315.73, 315.73, 324.38, 320.78, 321.18,
								320.28, 331.53, 332.14, 331.35, 326.52, 326.52,
								320.18, 314.17, 312.71, 312.71, 318.76, 322.11,
								322.95, 322.95, 326.65, 331.67, 331.67, 330.65,
								330.65, 349.34, 350.04, 348.52, 350.16, 359.08,
								356.42, 354.45, 354.29, 364.93, 361.9, 361.9,
								362.72, 364.85, 365.6, 360.39, 359.75, 359.75,
								362.89, 368.08, 370.01, 370.01, 370.01, 388.52,
								393.32, 395.42, 395.82, 422.64, 430.81, 427.25,
								427.47, 430.69, 428.36, 428.36, 434.45, 435.01,
								460.97, 458.37, 460.51, 460.51, 459.07, 452.8,
								459.52, 459.52, 466.62, 468.87, 461.66, 465.37,
								465.37, 468.97, 464.53, 461.58, 461.14, 452.33,
								450.59, 449.41, 449.41, 462.3, 460.92, 460.92,
								461.66, 462.39, 484.69, 482.22, 479.22, 478.51,
								489.64, 485.17, 484.61, 486.38, 499.4, 497.58,
								497.58, 497.97, 496.93, 519.65, 516.23, 516.83,
								517.15, 522.0, 520.56, 519.59, 505.44, 519.41,
								510.73, 510.73, 513.97, 513.75, 542.45, 541.64,
								545.81, 549.19, 563.83, 567.41, 561.77, 562.67,
								562.67, 583.93, 585.12, 579.53, 579.53, 590.15,
								586.79, 583.84, 582.82, 597.73, 582.69, 581.47,
								582.87, 595.5, 588.05, 586.17, 586.24, 587.78,
								593.08, 591.98, 587.75, 567.87, 584.8, 607.92,
								596.38, 597.68, 596.97, 582.55, 586.55, 587.97,
								587.97, 602.88, 603.26, 584.41, 607.74, 627.82,
								626.82, 625.6, 625.6, 619.17, 645.41, 635.22,
								625.83, 631.89, 637.53, 632.12, 627.36, 625.8,
								624.37, 625.17, 627.67, 619.27, 619.27, 636.98,
								637.3, 627.72, 606.23, 610.93, 609.23, 614.84,
								610.2, 617.59, 588.0, 599.89, 599.43, 599.27,
								606.57, 607.06, 604.81, 601.29, 600.05, 599.64,
								599.78, 595.46, 619.95, 606.18, 605.5, 610.17,
								617.87, 612.87, 611.33, 614.83, 614.87, 628.55,
								629.92, 620.11, 619.57, 632.39, 626.83, 616.24,
								611.91, 599.44, 603.79, 594.6, 589.55, 618.53,
								592.43, 592.43, 592.32, 596.22, 592.62, 576.27,
								562.31, 560.31, 560.31, 589.19, 584.25, 577.71,
								576.85, 583.27, 577.37, 599.59, 599.65, 595.6,
								584.77, 593.35, 594.95, 594.95, 613.15, 614.44,
								612.35, 611.2, 611.2, 612.6, 616.57, 621.52,
								621.86, 623.5, 617.63, 622.55, 623.52, 638.18,
								638.25, 634.85, 627.88, 637.65, 636.43, 633.64,
								635.95, 635.95, 635.25, 639.18, 635.93, 646.51,
								662.12, 621.41, 622.94, 629.39, 634.96, 642.95,
								644.21, 647.05, 645.45, 660.73, 646.38, 646.62,
								646.62, 644.82, 648.31, 647.41, 647.27, 647.27,
								675.16, 673.36, 670.59, 666.79, 685.3, 693.37,
								693.6, 680.8, 698.16, 698.96, 703.5, 708.33,
								704.3, 712.96, 706.93, 718.32, 704.7, 731.81,
								733.74, 710.32, 707.45, 738.44, 724.6, 731.07,
								735.13, 739.1, 742.7, 746.31, 746.39, 741.43,
								745.56, 737.51, 742.61, 744.85, 762.88, 763.88,
								762.68, 760.81, 760.11, 781.08, 774.92, 781.6,
								777.88, 779.04, 779.07, 791.2, 791.2, 795.01,
								839.1, 839.1, 842.95, 842.95, 820.83, 824.18,
								845.8, 845.29, 877.87, 879.4, 882.39, 884.09,
								898.92, 904.72, 895.13, 899.56, 901.69, 911.65,
								922.08, 922.99, 923.48, 912.24, 909.84, 917.35,
								920.94, 920.08, 915.94, 915.42, 905.4, 903.04,
								900.58, 910.43, 905.28, 911.43, 895.99, 895.24,
								909.38, 883.97, 870.3, 875.97, 875.97, 871.46,
								853.93, 854.12, 849.35, 847.17, 837.07, 800.7,
								794.72, 790.42, 790.42, 790.42, 785.54, 785.54,
								779.15, 782.9, 782.07, 781.75, 777.37, 781.68,
								773.25, 774.86, 775.45, 781.17, 782.87, 772.77,
								774.4, 773.64, 760.03, 766.09, 772.48, 774.48,
								763.54, 746.72, 758.73, 758.52, 759.58, 759.18,
								737.95, 733.99, 725.52, 725.52, 740.7, 731.03,
								734.52, 730.99, 741.67, 746.16, 744.54, 736.15,
								729.86, 740.13, 735.21, 733.67, 729.7, 715.23,
								721.28, 714.86, 724.15, 697.75, 682.96, 681.76,
								681.76, 682.82, 672.3, 673.51, 674.18, 669.45,
								667.65, 672.61, 669.75, 668.2, 673.3, 668.04,
								662.4, 653.34, 649.25, 660.27, 666.32, 673.25,
								672.42, 672.27, 665.54, 667.15, 661.96, 658.0,
								649.63, 651.87, 639.82, 642.42, 637.25, 644.68,
								653.09, 649.85, 645.97, 637.97, 635.49, 634.49,
								636.28, 645.92, 641.59, 641.59, 643.59, 647.42,
								654.39, 649.65, 646.6, 630.99, 621.08, 621.88,
								625.25, 621.11, 624.16, 624.16, 623.51, 623.51,
								619.79, 616.17, 614.41, 601.27, 594.08, 603.19,
								597.72, 597.65, 597.19, 603.93, 592.03, 591.68,
								591.36, 590.3, 590.3,
							],
						},
					],
				},
				options: {
					responsive: true,
					plugins: {
						legend: {
							position: "top",
						},
						title: {
							display: true,
							text: "Rare Whisky 101 Index",
						},
					},
					scales: {
						y: {
							title: {
								display: true,
								text: "Index Value",
							},
						},
						x: {
							title: {
								display: true,
								text: "Year",
							},
						},
					},
				},
			});
		}
		setupChart(data);
		return {
			update(data) {
				chartObject.destroy();
				setupChart(data);
			},
			destroy() {
				chartObject.destroy();
			},
		};
	}
</script>

<div>
	<canvas class="chart" use:chart={$state.snapshot(dataToGraph)} />
</div>
